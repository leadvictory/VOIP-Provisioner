define("apps/voicemails/app",["require","jquery","lodash","monster"],function(t){var e=t("jquery"),a=t("lodash"),l=t("monster");return{name:"voicemails",css:["app"],i18n:{"de-DE":{customCss:!1},"en-US":{customCss:!1}},appFlags:{voicemails:{maxRange:31,defaultRange:1,minPhoneNumberLength:7}},requests:{},subscribe:{},load:function(t){var e=this;e.initApp(function(){t&&t(e)})},initApp:function(t){var e=this;l.pub("auth.initApp",{app:e,callback:t})},render:function(t){var e=this;e.getVoicemailsData(function(t){var a=[{tabs:[{text:e.i18n.active().voicemails.menuTitles.receivedVMs,callback:e.renderReceivedVMs}]}];if(t.storage){var n={text:e.i18n.active().voicemails.menuTitles.storage,callback:e.renderStorage};a[0].tabs.push(n)}l.ui.generateAppLayout(e,{menus:a})})},getVoicemailsData:function(t){var e=this;l.parallel({storage:function(t){e.getStorage(function(e){t(null,e)})}},function(e,a){t&&t(a)})},getStorage:function(t){var e=this;e.callApi({resource:"storage.get",data:{accountId:e.accountId,generateError:!1},success:function(e){t(e.data)},error:function(e,a,l){404===a.status?t(void 0):l(e)}})},renderStorage:function(t){var a=this,n=t||{},i=n.container||e("#voicemails_app_container .app-content-wrapper");a.getStorage(function(t){var n=a.storageFormatData(t),s=e(a.getTemplate({name:"storage",data:n}));a.storageBindEvents(s),l.pub("common.storagePlanManager.render",{container:s.find(".control-container"),forceTypes:["mailbox_message"],hideOtherTypes:!0}),i.fadeOut(function(){e(this).empty().append(s).fadeIn()})})},storageBindEvents:function(t){},storageFormatData:function(t){return t},renderReceivedVMs:function(t){var a=this,l=t||{},n=l.container||e("#voicemails_app_container .app-content-wrapper");a.listVMBoxes(function(t){var l={vmboxes:t,count:t.length},i=e(a.getTemplate({name:"received-voicemails",data:l}));a.voicemailsInitDatePicker(n,i),a.bindReceivedVMs(i),n.fadeOut(function(){e(this).empty().append(i).fadeIn()})})},voicemailsInitDatePicker:function(t,e){var a=this,n=l.util.getDefaultRangeDates(a.appFlags.voicemails.defaultRange),i=n.from,s=n.to,o={container:e,range:a.appFlags.voicemails.maxRange};l.ui.initRangeDatepicker(o),e.find("#startDate").datepicker("setDate",i),e.find("#endDate").datepicker("setDate",s),e.find(".apply-filter").on("click",function(l){var n=e.find("#select_vmbox").val();a.displayVMList(t,n)}),e.find(".toggle-filter").on("click",function(){e.find(".filter-by-date").toggleClass("active")})},bindReceivedVMs:function(t){var a=this,n=t.find(".select-vmbox");l.ui.tooltips(t),l.ui.footable(t.find(".footable")),l.ui.chosen(n,{placeholder_text_single:a.i18n.active().voicemails.receivedVMs.actionBar.selectVM.none}),n.on("change",function(){var l=e(this).val();t.find(".select-vmbox").val(l).trigger("chosen:updated"),a.displayVMList(t,l)}),t.find("#refresh_voicemails").on("click",function(){var e=n.val();"none"!==e&&a.displayVMList(t,e)}),t.find(".mark-as-link").on("click",function(){var l=e(this).data("type"),i=n.val(),s=t.find(".select-message:checked"),o=[];s.each(function(){o.push(e(this).data("media-id"))}),t.find(".data-state").hide(),t.find(".loading-state").show(),a.updateFolder(i,o,l,function(){a.displayVMList(t,i)})}),t.find(".delete-voicemails").on("click",function(){var l=n.val(),i=t.find(".select-message:checked"),s=[];i.each(function(){s.push(e(this).data("media-id"))}),t.find(".data-state").hide(),t.find(".loading-state").show(),a.bulkRemoveMessages(l,s,function(){a.displayVMList(t,l)})}),t.find("#select_move_to_vmbox").on("change",function(){var l=e(this).val(),i=n.val(),s=t.find(".select-message:checked"),o=[];s.each(function(){o.push(e(this).data("media-id"))}),t.find(".data-state").hide(),t.find(".loading-state").show(),a.moveVoicemailMessages(i,l,o,function(){a.displayVMList(t,i)})}),t.find(".move-to-vmbox").on("click",function(){var l=e(this).data("id"),i=n.val(),s=t.find(".select-message:checked"),o=[];s.each(function(){o.push(e(this).data("media-id"))}),t.find(".data-state").hide(),t.find(".loading-state").show(),a.moveVoicemailMessages(i,l,o,function(){a.displayVMList(t,i)})}),t.on("click",".play-vm",function(l){var n=e(this).parents(".voicemail-row"),i=t.find(".voicemail-row.active");if(n.hasClass("active")||0===i.length){l.stopPropagation();var s=t.find("#select_vmbox").val(),o=n.data("media-id");t.find("table").addClass("highlighted"),n.addClass("active"),a.playVoicemail(t,s,o)}}),t.on("click",".details-vm",function(){var t=e(this).parents(".voicemail-row"),n=t.data("call-id");a.getCDR(n,function(t){var n=e(a.getTemplate({name:"voicemails-CDRDialog"}));l.ui.renderJSON(t,n.find("#jsoneditor")),l.ui.dialog(n,{title:a.i18n.active().voicemails.receivedVMs.CDRPopup.title})},function(){l.ui.alert(a.i18n.active().voicemails.receivedVMs.noCDR)})});var i=function(){t.find(".select-message:checked").length?(t.find(".hidable").removeClass("hidden"),t.find(".main-select-message").prop("checked",!0)):(t.find(".hidable").addClass("hidden"),t.find(".main-select-message").prop("checked",!1))};t.on("change",".select-message",function(){i()}),t.find(".main-select-message").on("click",function(){var a=e(this),l=a.prop("checked");t.find(".select-message").prop("checked",l),i()}),t.find(".select-some-messages").on("click",function(){var a=e(this),l=a.data("type");t.find(".select-message").prop("checked",!1),"none"!==l&&("all"===l?t.find(".select-message").prop("checked",!0):["new","saved","deleted"].indexOf(l)>=0&&t.find('.voicemail-row[data-folder="'+l+'"] .select-message').prop("checked",!0)),i()}),t.on("click",".select-line",function(){if(!t.find("table").hasClass("highlighted")){var a=e(this).parents(".voicemail-row").find(".select-message");a.prop("checked",!a.prop("checked")),i()}})},removeOpacityLayer:function(t,e){e.find(".voicemail-player").remove(),e.find(".duration, .actions").show(),e.removeClass("active"),t.find("table").removeClass("highlighted")},formatVMURI:function(t,e){var a=this;return a.apiUrl+"accounts/"+a.accountId+"/vmboxes/"+t+"/messages/"+e+"/raw?auth_token="+a.getAuthToken()},playVoicemail:function(t,a,l){var n=this,i=t.find('.voicemail-row[data-media-id="'+l+'"]');t.find("table").addClass("highlighted"),i.addClass("active"),i.find(".duration, .actions").hide();var s=n.formatVMURI(a,l),o={uri:s},r=e(n.getTemplate({name:"cell-voicemail-player",data:o}));"new"===i.data("folder")&&n.updateFolder(a,[l],"saved",function(){i.data("folder","saved").attr("data-folder","saved"),i.find(".status").data("folder","saved").attr("data-folder","saved").html(n.i18n.active().voicemails.receivedVMs.status.saved)}),i.append(r);var c=function(t){e(t.target).closest(".voicemail-player").length||(t.stopPropagation(),d())},d=function(){e(document).off("click",c),n.removeOpacityLayer(t,i)};e(document).on("click",c),r.find(".close-player").on("click",d),r.find("audio").get(0).play()},voicemailsGetRows:function(t,a,l){var n=this;n.newGetVMBoxMessages(t,a,function(t){var i=n.formatMessagesData(t.data,a),s={voicemails:i.voicemails},o=e(n.getTemplate({name:"voicemails-rows",data:s}));l&&l(o,t,i)})},displayVMList:function(t,a){var n=this,i=t.find("input.filter-from").datepicker("getDate"),s=t.find("input.filter-to").datepicker("getDate"),o=t.find(".filter-by-date").hasClass("active");t.removeClass("empty"),t.find('.count-wrapper[data-type="new"] .count-text').html("?"),t.find('.count-wrapper[data-type="total"] .count-text').html("?"),t.find(".data-state").hide(),t.find(".loading-state").show(),t.find(".hidable").addClass("hidden"),t.find(".main-select-message").prop("checked",!1),l.ui.footable(t.find(".voicemails-table .footable"),{getData:function(r,c){o&&(r=e.extend(!0,r,{created_from:l.util.dateToBeginningOfGregorianDay(i),created_to:l.util.dateToEndOfGregorianDay(s)})),n.voicemailsGetRows(r,a,function(e,a,l){t.find('.count-wrapper[data-type="new"] .count-text').html(l.counts.newMessages),t.find('.count-wrapper[data-type="total"] .count-text').html(l.counts.totalMessages),c&&c(e,a)})},afterInitialized:function(){t.find(".data-state").show(),t.find(".loading-state").hide()},backendPagination:{enabled:!1}})},formatMessagesData:function(t,e){var n=this,i=function(t){var e,i,s=n.appFlags.voicemails.minPhoneNumberLength;return a.size(t)<s?{isPhoneNumber:!1,value:t,userFormat:t}:(e="+"===a.head(t)?t:/^\d+$/.test(t)?"+"+t:t,i=l.util.getFormatPhoneNumber(e),{isPhoneNumber:i.isValid,value:i.isValid?i.e164Number:t,userFormat:i.isValid?i.userFormat:t})};return{voicemails:a.map(t,function(t){var s=t.to.substr(0,t.to.indexOf("@")),o=t.from.substr(0,t.from.indexOf("@")),r=a.get(t,"caller_id_name",""),c=i(s),d=i(o),u=i(r);return a.merge({formatted:{to:c,from:d,callerIDName:u,duration:l.util.friendlyTimer(t.length/1e3),uri:n.formatVMURI(e,t.media_id),callId:l.util.getModbID(t.call_id,t.timestamp),mediaId:t.media_id,showCallerIDName:u.value!==d.value}},t)}),counts:{newMessages:a.sumBy(t,function(t){return a.chain(t).get("folder").isEqual("new").toInteger().value()}),totalMessages:t.length}}},updateFolder:function(t,e,a,l){this.updateVMBoxMessages(t,e,a,function(){l&&l()})},getCDR:function(t,e,a){var l=this;l.callApi({resource:"cdrs.get",data:{accountId:l.accountId,cdrId:t,generateError:!1},success:function(t){e&&e(t.data)},error:function(t,e,l){t&&"404"===t.error?a&&a({}):l(t,{generateError:!0})}})},getVMBox:function(t,e){var a=this;a.callApi({resource:"voicemail.get",data:{accountId:a.accountId,voicemailId:t},success:function(t){e&&e(t.data)}})},newGetVMBoxMessages:function(t,e,a){var l=this;l.callApi({resource:"voicemail.listMessages",data:{accountId:l.accountId,voicemailId:e,filters:t},success:function(t){a&&a(t)}})},moveVoicemailMessages:function(t,e,a,l){var n=this,i={messages:a,source_id:e};n.bulkUpdateMessages(t,i,l)},updateVMBoxMessages:function(t,e,a,l){var n=this,i={messages:e,folder:a};n.bulkUpdateMessages(t,i,l)},bulkRemoveMessages:function(t,e,a){var l=this;l.callApi({resource:"voicemail.deleteMessages",data:{accountId:l.accountId,voicemailId:t,data:{messages:e}},success:function(t){a&&a(t.data)}})},bulkUpdateMessages:function(t,e,a){var l=this;l.callApi({resource:"voicemail.updateMessages",data:{accountId:l.accountId,voicemailId:t,data:e},success:function(t){a&&a(t.data)}})},updateVMBox:function(t,e){var a=this;a.callApi({resource:"voicemail.update",data:{accountId:a.accountId,voicemailId:t.id,data:t},success:function(t){e&&e(t.data)}})},listVMBoxes:function(t){var e=this;e.callApi({resource:"voicemail.list",data:{accountId:e.accountId,filters:{paginate:!1}},success:function(e){t&&t(e.data)}})}}}),this.monster=this.monster||{},this.monster.cache=this.monster.cache||{},this.monster.cache.templates=this.monster.cache.templates||{},this.monster.cache.templates.voicemails=this.monster.cache.templates.voicemails||{},this.monster.cache.templates.voicemails._main=this.monster.cache.templates.voicemails._main||{},this.monster.cache.templates.voicemails._main["cell-voicemail-player"]=Handlebars.template({compiler:[8,">= 4.3.0"],main:function(t,e,a,l,n){var i,s,o=(t.propertyIsEnumerable,t.escapeExpression);return'<td colspan="2" class="voicemail-player">\n\t<span class="close-player">'+o(t.lambda(null!=(i=null!=e?e.i18n:e)?i.close:i,e))+'</span>\n\t<audio controls src="'+o((s=null!=(s=a.uri||(null!=e?e.uri:e))?s:t.hooks.helperMissing,"function"==typeof s?s.call(null!=e?e:t.nullContext||{},{name:"uri",hash:{},data:n}):s))+'"></audio>\n</td>'},useData:!0}),this.monster.cache.templates.voicemails._main["received-voicemails"]=Handlebars.template({1:function(t,e,a,l,n){var i,s=(t.propertyIsEnumerable,null!=e?e:t.nullContext||{}),o=t.hooks.helperMissing,r=t.escapeExpression;return'\t\t\t\t\t\t<option value="'+r((i=null!=(i=a.id||(null!=e?e.id:e))?i:o,"function"==typeof i?i.call(s,{name:"id",hash:{},data:n}):i))+'">'+r((i=null!=(i=a.name||(null!=e?e.name:e))?i:o,"function"==typeof i?i.call(s,{name:"name",hash:{},data:n}):i))+"</option>\n"},3:function(t,e,a,l,n){return'\t\t\t\t\t\t\t\t<input class="main-select-message" type="checkbox"/>\n'},5:function(t,e,a,l,n){var i,s=(t.propertyIsEnumerable,null!=e?e:t.nullContext||{}),o=t.hooks.helperMissing,r=t.escapeExpression;return'\t\t\t\t\t\t\t\t<li><a href="javascript:void(0);" class="move-to-vmbox" data-id="'+r((i=null!=(i=a.id||(null!=e?e.id:e))?i:o,"function"==typeof i?i.call(s,{name:"id",hash:{},data:n}):i))+'">'+r((i=null!=(i=a.name||(null!=e?e.name:e))?i:o,"function"==typeof i?i.call(s,{name:"name",hash:{},data:n}):i))+"</a></li>\n"},7:function(t,e,a,l,n){var i,s=(t.propertyIsEnumerable,null!=e?e:t.nullContext||{}),o=t.hooks.helperMissing,r=t.escapeExpression;return'\t\t\t\t\t\t\t<option class="box-row" data-id="'+r((i=null!=(i=a.id||(null!=e?e.id:e))?i:o,"function"==typeof i?i.call(s,{name:"id",hash:{},data:n}):i))+'" value="'+r((i=null!=(i=a.id||(null!=e?e.id:e))?i:o,"function"==typeof i?i.call(s,{name:"id",hash:{},data:n}):i))+'">'+r((i=null!=(i=a.name||(null!=e?e.name:e))?i:o,"function"==typeof i?i.call(s,{name:"name",hash:{},data:n}):i))+"</option>\n"},compiler:[8,">= 4.3.0"],main:function(t,e,a,l,n){var i,s,o,r=(t.propertyIsEnumerable,t.lambda),c=t.escapeExpression,d=null!=e?e:t.nullContext||{},u=t.hooks.helperMissing,m='<div class="received-voicemails-container empty">\n\t<div class="main-header clearfix">\n\t\t<div class="voicemail-selection-wrapper pull-left">\n\t\t\t<div class="filters vmbox-selector">\n\t\t\t\t<div class="select-header">\n\t\t\t\t\t'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.currentlyViewing:i,e))+'\n\t\t\t\t</div>\n\t\t\t\t<select class="select-vmbox" id="select_vmbox">\n\t\t\t\t\t<option value="none"></option>\n'+(null!=(i=a.each.call(d,null!=e?e.vmboxes:e,{name:"each",hash:{},fn:t.program(1,n,0),inverse:t.noop,data:n}))?i:"")+'\t\t\t\t</select>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="counts-wrapper pull-left">\n\t\t\t<div class="count-wrapper" data-type="new">\n\t\t\t\t'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.new:i,e))+'\n\t\t\t\t<span class="count-text"></span>\n\t\t\t</div>\n\n\t\t\t<div class="count-wrapper" data-type="total">\n\t\t\t\t'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.total:i,e))+'\n\t\t\t\t<span class="count-text"></span>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<a id="refresh_voicemails" class="monster-link pull-left" href="javascript:void(0);" data-toggle="tooltip" data-placement="top" data-original-title="'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.tooltips:i)?i.refresh:i,e))+'"><i class="fa fa-refresh"></i></a>\n\t</div>\n\t<div class="monster-table-wrapper-spaced">\n\t\t<div class="action-bar monster-table-header">\n\t\t\t<div class="filters basic-actions pull-left">\n\t\t\t\t<div class="select-voicemails-wrapper monster-select-dropdown-neutral pull-left" data-toggle="tooltip" data-placement="top" data-original-title="'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.tooltips:i)?i.select:i,e))+'">\n\t\t\t\t\t<li class="dropdown">\n\t\t\t\t\t\t<a data-toggle="dropdown" class="dropdown-toggle" href="javascript:void(0);">\n';return s=null!=(s=a.monsterCheckbox||(null!=e?e.monsterCheckbox:e))?s:u,o={name:"monsterCheckbox",hash:{},fn:t.program(3,n,0),inverse:t.noop,data:n},i="function"==typeof s?s.call(d,o):s,a.monsterCheckbox||(i=t.hooks.blockHelperMissing.call(e,i,o)),null!=i&&(m+=i),m+'\t\t\t\t\t\t\t<i class="fa fa-caret-down"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class="dropdown-menu">\n\t\t\t\t\t\t\t<li><a href="javascript:void(0);" class="select-some-messages" data-type="all">'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.select:i)?i.all:i,e))+'</a></li>\n\t\t\t\t\t\t\t<li><a href="javascript:void(0);" class="select-some-messages" data-type="new">'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.select:i)?i.new:i,e))+'</a></li>\n\t\t\t\t\t\t\t<li><a href="javascript:void(0);" class="select-some-messages" data-type="saved">'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.select:i)?i.listened:i,e))+'</a></li>\n\t\t\t\t\t\t\t<li><a href="javascript:void(0);" class="select-some-messages" data-type="deleted">'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.select:i)?i.deleted:i,e))+'</a></li>\n\t\t\t\t\t\t\t<li><a href="javascript:void(0);" class="select-some-messages" data-type="none">'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.select:i)?i.none:i,e))+'</a></li>\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="filters selected-actions pull-left margin-left">\n\t\t\t\t\t<div class="mark-as-wrapper hidable hidden monster-select-dropdown-neutral pull-left" data-toggle="tooltip" data-placement="top" data-original-title="'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.tooltips:i)?i.markAs:i,e))+'">\n\t\t\t\t\t\t<li class="dropdown">\n\t\t\t\t\t\t\t<a data-toggle="dropdown" class="dropdown-toggle" href="javascript:void(0);">\n\t\t\t\t\t\t\t\t<i class="icon-telicon-prioritize"></i>\n\t\t\t\t\t\t\t\t<i class="fa fa-caret-down"></i>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t<ul class="dropdown-menu">\n\t\t\t\t\t\t\t\t<li><a href="javascript:void(0);" class="mark-as-link" data-type="new"><i class="fa fa-circle monster-green"></i>'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.markAsNew:i,e))+'</a></li>\n\t\t\t\t\t\t\t\t<li><a href="javascript:void(0);" class="mark-as-link" data-type="saved"><i class="fa fa-circle monster-lightgrey"></i>'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.markAsListened:i,e))+'</a></li>\n\t\t\t\t\t\t\t\t<li><a href="javascript:void(0);" class="mark-as-link" data-type="deleted"><i class="fa fa-circle monster-red"></i>'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.markAsDeleted:i,e))+'</a></li>\n\t\t\t\t\t\t\t\t<li><a href="javascript:void(0);" class="delete-voicemails"><i class="fa fa-trash"></i>'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.delete:i,e))+'</a></li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div class="move-to-wrapper hidable hidden monster-select-dropdown-neutral pull-left" data-toggle="tooltip" data-placement="top" data-original-title="'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.actionBar:i)?i.tooltips:i)?i.moveTo:i,e))+'">\n\t\t\t\t\t<li class="dropdown">\n\t\t\t\t\t\t<a data-toggle="dropdown" class="dropdown-toggle" href="javascript:void(0);">\n\t\t\t\t\t\t\t<i class="icon-telicon-forward"></i>\n\t\t\t\t\t\t\t<i class="fa fa-caret-down"></i>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<ul class="dropdown-menu vmbox-target">\n'+(null!=(i=a.each.call(d,null!=e?e.vmboxes:e,{name:"each",hash:{},fn:t.program(5,n,0),inverse:t.noop,data:n}))?i:"")+'\t\t\t\t\t\t</ul>\n\t\t\t\t\t</li>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class="filter-by-date">\n\t\t\t\t<div class="expand-dates">\n\t\t\t\t\t<a class="monster-link blue toggle-filter">'+c(r(null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.filterByDate:i,e))+'</a>\n\t\t\t\t</div>\n\t\t\t\t<div class="date-ranges">\n\t\t\t\t\t<span>'+c(r(null!=(i=null!=e?e.i18n:e)?i.startDate:i,e))+'</span>\n\t\t\t\t\t<input id="startDate" type="text" class="date-filter filter-from">\n\t\t\t\t\t<i class="fa fa-calendar"></i>\n\t\t\t\t\t<span>'+c(r(null!=(i=null!=e?e.i18n:e)?i.endDate:i,e))+'</span>\n\t\t\t\t\t<input id="endDate" type="text" class="date-filter filter-to">\n\t\t\t\t\t<i class="fa fa-calendar"></i>\n\t\t\t\t\t<button type="button" class="apply-filter monster-button-neutral monster-button-fit">'+c(r(null!=(i=null!=e?e.i18n:e)?i.filter:i,e))+'</button>\n\t\t\t\t\t<a class="monster-link blue toggle-filter">'+c(r(null!=(i=null!=e?e.i18n:e)?i.cancel:i,e))+'</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class="content">\n\t\t\t<div class="empty-state">\n\t\t\t\t<div class="headline">'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.empty:i)?i.headline1:i,e))+'<span class="count">'+c((s=null!=(s=a.count||(null!=e?e.count:e))?s:u,"function"==typeof s?s.call(d,{name:"count",hash:{},data:n}):s))+"</span>"+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.empty:i)?i.headline2:i,e))+'</div>\n\t\t\t\t<div class="sub-headline">'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.empty:i)?i.subHeadline:i,e))+'</div>\n\n\t\t\t\t<div class="vmboxes-list">\n\t\t\t\t\t<select class="select-vmbox" id="select_vmbox_empty">\n\t\t\t\t\t\t<option value="none"></option>\n'+(null!=(i=a.each.call(d,null!=e?e.vmboxes:e,{name:"each",hash:{},fn:t.program(7,n,0),inverse:t.noop,data:n}))?i:"")+'\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="data-state">\n\t\t\t\t<div class="voicemails-table">\n\t\t\t\t\t<table class="monster-table footable" id="voicemails_table">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<th class="select-cell" data-type="html" data-sortable="false"></th>\n\t\t\t\t\t\t\t\t<th data-type="html">'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.table:i)?i.columns:i)?i.status:i,e))+'</th>\n\t\t\t\t\t\t\t\t<th data-type="html" data-sorted="true" data-direction="DESC">'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.table:i)?i.columns:i)?i.received:i,e))+'</th>\n\t\t\t\t\t\t\t\t<th data-type="html">'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.table:i)?i.columns:i)?i.from:i,e))+'</th>\n\t\t\t\t\t\t\t\t<th data-type="html">'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.table:i)?i.columns:i)?i.targetNumber:i,e))+'</th>\n\t\t\t\t\t\t\t\t<th data-breakpoints="xs">'+c(r(null!=(i=null!=(i=null!=(i=null!=(i=null!=(i=null!=e?e.i18n:e)?i.voicemails:i)?i.receivedVMs:i)?i.table:i)?i.columns:i)?i.duration:i,e))+'</th>\n\t\t\t\t\t\t\t\t<th data-filterable="false" data-type="html" data-sortable="false"></th>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</table>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="loading-state">\n\t\t\t\t<i class="fa fa-spin fa-spinner monster-primary-color"></i>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n'},useData:!0}),this.monster.cache.templates.voicemails._main.storage=Handlebars.template({compiler:[8,">= 4.3.0"],main:function(t,e,a,l,n){return'<div id="storage_container">\n\t<div class="control-container"></div>\n</div>\n'},useData:!0}),this.monster.cache.templates.voicemails._main["voicemails-CDRDialog"]=Handlebars.template({compiler:[8,">= 4.3.0"],main:function(t,e,a,l,n){return'<div id="voicemails_cdr_details_dialog">\n\t<div id="jsoneditor">\n\t</div>\n</div>'},useData:!0}),this.monster.cache.templates.voicemails._main["voicemails-rows"]=Handlebars.template({1:function(t,e,a,l,n){var i,s,o,r=(t.propertyIsEnumerable,t.lambda),c=t.escapeExpression,d=null!=e?e:t.nullContext||{},u=t.hooks.helperMissing,m="function",p='\t<tr class="voicemail-row" data-media-id="'+c(r(null!=(i=null!=e?e.formatted:e)?i.mediaId:i,e))+'" data-call-id="'+c(r(null!=(i=null!=e?e.formatted:e)?i.callId:i,e))+'" data-timestamp="'+c((s=null!=(s=a.timestamp||(null!=e?e.timestamp:e))?s:u,typeof s===m?s.call(d,{name:"timestamp",hash:{},data:n}):s))+'" data-folder="'+c((s=null!=(s=a.folder||(null!=e?e.folder:e))?s:u,typeof s===m?s.call(d,{name:"folder",hash:{},data:n}):s))+'">\n\t\t<td style="width:20px;" class="select-cell" data-filter-value="'+c(r(null!=(i=null!=e?e.formatted:e)?i.callId:i,e))+'">\n';return s=null!=(s=a.monsterCheckbox||(null!=e?e.monsterCheckbox:e))?s:u,o={name:"monsterCheckbox",hash:{},fn:t.program(2,n,0),inverse:t.noop,data:n},i=typeof s===m?s.call(d,o):s,a.monsterCheckbox||(i=t.hooks.blockHelperMissing.call(e,i,o)),null!=i&&(p+=i),p+'\t\t\t<div class="disable-cell-content"></div>\n\t\t</td>\n\t\t<td class="status select-line" data-folder="'+c((s=null!=(s=a.folder||(null!=e?e.folder:e))?s:u,typeof s===m?s.call(d,{name:"folder",hash:{},data:n}):s))+'" data-sort-value="'+c((s=null!=(s=a.folder||(null!=e?e.folder:e))?s:u,typeof s===m?s.call(d,{name:"folder",hash:{},data:n}):s))+'">\n'+(null!=(i=(a.compare||e&&e.compare||u).call(d,null!=e?e.folder:e,"===","new",{name:"compare",hash:{},fn:t.program(4,n,0),inverse:t.program(6,n,0),data:n}))?i:"")+"\t\t\t\t"+c((a.tryI18n||e&&e.tryI18n||u).call(d,(i=(i=(i=(i=n&&n.root)&&i.i18n)&&i.voicemails)&&i.receivedVMs)&&i.status,null!=e?e.folder:e,{name:"tryI18n",hash:{},data:n}))+'\n\t\t\t</span>\n\t\t</td>\n\t\t\x3c!--<td class="select-line">'+c((s=null!=(s=a.call_id||(null!=e?e.call_id:e))?s:u,typeof s===m?s.call(d,{name:"call_id",hash:{},data:n}):s))+'</td>--\x3e\n\t\t<td class="select-line no-padding" data-filter-value="'+c((s=null!=(s=a.timestamp||(null!=e?e.timestamp:e))?s:u,typeof s===m?s.call(d,{name:"timestamp",hash:{},data:n}):s))+" "+c((a.toFriendlyDate||e&&e.toFriendlyDate||u).call(d,null!=e?e.timestamp:e,{name:"toFriendlyDate",hash:{},data:n}))+'" data-sort-value="'+c((s=null!=(s=a.timestamp||(null!=e?e.timestamp:e))?s:u,typeof s===m?s.call(d,{name:"timestamp",hash:{},data:n}):s))+'">\n\t\t\t<div class="top-line">'+c((a.toFriendlyDate||e&&e.toFriendlyDate||u).call(d,null!=e?e.timestamp:e,"date",{name:"toFriendlyDate",hash:{},data:n}))+'</div>\n\t\t\t<div class="bottom-line">'+c((a.toFriendlyDate||e&&e.toFriendlyDate||u).call(d,null!=e?e.timestamp:e,"time",{name:"toFriendlyDate",hash:{},data:n}))+"</div>\n\t\t</td>\n"+(null!=(i=a.if.call(d,null!=(i=null!=e?e.formatted:e)?i.showCallerIDName:i,{name:"if",hash:{},fn:t.program(11,n,0),inverse:t.program(21,n,0),data:n}))?i:"")+'\t\t<td class="select-line" data-filter-value="'+c((s=null!=(s=a.to||(null!=e?e.to:e))?s:u,typeof s===m?s.call(d,{name:"to",hash:{},data:n}):s))+" "+c(r(null!=(i=null!=(i=null!=e?e.formatted:e)?i.to:i)?i.value:i,e))+" "+c(r(null!=(i=null!=(i=null!=e?e.formatted:e)?i.to:i)?i.userFormat:i,e))+'" data-sort-value="'+c(r(null!=(i=null!=(i=null!=e?e.formatted:e)?i.to:i)?i.value:i,e))+'">\n'+(null!=(i=a.if.call(d,null!=(i=null!=(i=null!=e?e.formatted:e)?i.to:i)?i.isPhoneNumber:i,{name:"if",hash:{},fn:t.program(26,n,0),inverse:t.program(28,n,0),data:n}))?i:"")+'\t\t</td>\n\t\t<td class="duration select-line">\n\t\t\t'+c(r(null!=(i=null!=e?e.formatted:e)?i.duration:i,e))+'\n\t\t</td>\n\t\t<td class="actions">\n\t\t\t<i class="fa fa-play-circle action-item play-vm"></i>\n\t\t\t<a class="action-item" href="'+c(r(null!=(i=null!=e?e.formatted:e)?i.uri:i,e))+'" target="_blank">\n\t\t\t\t<i class="fa fa-download download-vm"></i>\n\t\t\t</a>\n\t\t\t<i class="fa fa-list action-item details-vm"></i>\n\t\t</td>\n\t</tr>\n'},2:function(t,e,a,l,n){var i;t.propertyIsEnumerable;return'\t\t\t\t<input class="select-message" type="checkbox" data-media-id="'+t.escapeExpression(t.lambda(null!=(i=null!=e?e.formatted:e)?i.mediaId:i,e))+'"/>\n'},4:function(t,e,a,l,n){return'\t\t\t\t<span class="monster-badge-success">\n'},6:function(t,e,a,l,n){var i;t.propertyIsEnumerable;return null!=(i=(a.compare||e&&e.compare||t.hooks.helperMissing).call(null!=e?e:t.nullContext||{},null!=e?e.folder:e,"===","deleted",{name:"compare",hash:{},fn:t.program(7,n,0),inverse:t.program(9,n,0),data:n}))?i:""},7:function(t,e,a,l,n){return'\t\t\t\t\t<span class="monster-badge-danger">\n'},9:function(t,e,a,l,n){return'\t\t\t\t\t<span class="monster-badge-neutral">\n'},11:function(t,e,a,l,n){var i,s,o=(t.propertyIsEnumerable,null!=e?e:t.nullContext||{}),r=t.escapeExpression,c=t.lambda;return'\t\t\t<td class="select-line no-padding" data-filter-value="'+r((s=null!=(s=a.from||(null!=e?e.from:e))?s:t.hooks.helperMissing,"function"==typeof s?s.call(o,{name:"from",hash:{},data:n}):s))+" "+r(c(null!=(i=null!=(i=null!=e?e.formatted:e)?i.from:i)?i.value:i,e))+" "+r(c(null!=(i=null!=(i=null!=e?e.formatted:e)?i.callerIDName:i)?i.value:i,e))+" "+r(c(null!=(i=null!=(i=null!=e?e.formatted:e)?i.from:i)?i.userFormat:i,e))+" "+r(c(null!=(i=null!=(i=null!=e?e.formatted:e)?i.callerIDName:i)?i.userFormat:i,e))+'" data-sort-value="'+r(c(null!=(i=null!=(i=null!=e?e.formatted:e)?i.from:i)?i.value:i,e))+" "+r(c(null!=(i=null!=(i=null!=e?e.formatted:e)?i.callerIDName:i)?i.value:i,e))+'" >\n\t\t\t\t<div class="top-line">\n'+(null!=(i=a.if.call(o,null!=(i=null!=(i=null!=e?e.formatted:e)?i.callerIDName:i)?i.isPhoneNumber:i,{name:"if",hash:{},fn:t.program(12,n,0),inverse:t.program(15,n,0),data:n}))?i:"")+'\t\t\t\t</div>\n\t\t\t\t<div class="bottom-line">\n'+(null!=(i=a.if.call(o,null!=(i=null!=(i=null!=e?e.formatted:e)?i.from:i)?i.isPhoneNumber:i,{name:"if",hash:{},fn:t.program(17,n,0),inverse:t.program(19,n,0),data:n}))?i:"")+"\t\t\t\t</div>\n\t\t\t</td>\n"},12:function(t,e,a,l,n){var i;t.propertyIsEnumerable;return"\t\t\t\t\t"+(null!=(i=(a.monsterNumberWrapper||e&&e.monsterNumberWrapper||t.hooks.helperMissing).call(null!=e?e:t.nullContext||{},null!=(i=null!=(i=null!=e?e.formatted:e)?i.callerIDName:i)?i.value:i,{name:"monsterNumberWrapper",hash:{},fn:t.program(13,n,0),inverse:t.noop,data:n}))?i:"")+"\n"},13:function(t,e,a,l,n){return""},15:function(t,e,a,l,n){var i;t.propertyIsEnumerable;return"\t\t\t\t\t"+t.escapeExpression(t.lambda(null!=(i=null!=(i=null!=e?e.formatted:e)?i.callerIDName:i)?i.value:i,e))+"\n"},17:function(t,e,a,l,n){var i;t.propertyIsEnumerable;return"\t\t\t\t\t"+(null!=(i=(a.monsterNumberWrapper||e&&e.monsterNumberWrapper||t.hooks.helperMissing).call(null!=e?e:t.nullContext||{},null!=(i=null!=(i=null!=e?e.formatted:e)?i.from:i)?i.value:i,{name:"monsterNumberWrapper",hash:{},fn:t.program(13,n,0),inverse:t.noop,data:n}))?i:"")+"\n"},19:function(t,e,a,l,n){var i;t.propertyIsEnumerable;return"\t\t\t\t\t"+t.escapeExpression(t.lambda(null!=(i=null!=(i=null!=e?e.formatted:e)?i.from:i)?i.value:i,e))+"\n"},21:function(t,e,a,l,n){var i,s,o=(t.propertyIsEnumerable,null!=e?e:t.nullContext||{}),r=t.escapeExpression,c=t.lambda;return'\t\t\t<td class="select-line" data-filter-value="'+r((s=null!=(s=a.from||(null!=e?e.from:e))?s:t.hooks.helperMissing,"function"==typeof s?s.call(o,{name:"from",hash:{},data:n}):s))+" "+r(c(null!=(i=null!=(i=null!=e?e.formatted:e)?i.from:i)?i.value:i,e))+" "+r(c(null!=(i=null!=(i=null!=e?e.formatted:e)?i.callerIDName:i)?i.value:i,e))+" "+r(c(null!=(i=null!=(i=null!=e?e.formatted:e)?i.from:i)?i.userFormat:i,e))+" "+r(c(null!=(i=null!=(i=null!=e?e.formatted:e)?i.callerIDName:i)?i.userFormat:i,e))+'" data-sort-value="'+r(c(null!=(i=null!=(i=null!=e?e.formatted:e)?i.from:i)?i.value:i,e))+" "+r(c(null!=(i=null!=(i=null!=e?e.formatted:e)?i.callerIDName:i)?i.value:i,e))+'">\n'+(null!=(i=a.if.call(o,null!=(i=null!=(i=null!=e?e.formatted:e)?i.from:i)?i.isPhoneNumber:i,{name:"if",hash:{},fn:t.program(22,n,0),inverse:t.program(24,n,0),data:n}))?i:"")+"\t\t\t</td>\n"},22:function(t,e,a,l,n){var i;t.propertyIsEnumerable;return"\t\t\t\t"+(null!=(i=(a.monsterNumberWrapper||e&&e.monsterNumberWrapper||t.hooks.helperMissing).call(null!=e?e:t.nullContext||{},null!=(i=null!=(i=null!=e?e.formatted:e)?i.from:i)?i.value:i,{name:"monsterNumberWrapper",hash:{},fn:t.program(13,n,0),inverse:t.noop,data:n}))?i:"")+"\n"},24:function(t,e,a,l,n){var i;t.propertyIsEnumerable
;return"\t\t\t\t"+t.escapeExpression(t.lambda(null!=(i=null!=(i=null!=e?e.formatted:e)?i.from:i)?i.value:i,e))+"\n"},26:function(t,e,a,l,n){var i;t.propertyIsEnumerable;return"\t\t\t"+(null!=(i=(a.monsterNumberWrapper||e&&e.monsterNumberWrapper||t.hooks.helperMissing).call(null!=e?e:t.nullContext||{},null!=(i=null!=(i=null!=e?e.formatted:e)?i.to:i)?i.value:i,{name:"monsterNumberWrapper",hash:{},fn:t.program(13,n,0),inverse:t.noop,data:n}))?i:"")+"\n"},28:function(t,e,a,l,n){var i;t.propertyIsEnumerable;return"\t\t\t"+t.escapeExpression(t.lambda(null!=(i=null!=(i=null!=e?e.formatted:e)?i.to:i)?i.value:i,e))+"\n"},compiler:[8,">= 4.3.0"],main:function(t,e,a,l,n){var i;t.propertyIsEnumerable;return null!=(i=a.each.call(null!=e?e:t.nullContext||{},null!=e?e.voicemails:e,{name:"each",hash:{},fn:t.program(1,n,0),inverse:t.noop,data:n}))?i:""},useData:!0});