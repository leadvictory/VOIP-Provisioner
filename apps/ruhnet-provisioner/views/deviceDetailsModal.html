<div class="section-wrapper">
  <div class="modal-overlay">
    <div class="device-modal">
      <h3>{{ i18n.provisioner.deviceModal.title }}</h3>
      <ul style="list-style: none; padding: 0; margin-bottom: 20px">
        <li>
          <strong>{{ i18n.provisioner.deviceModal.type }}:</strong>
          {{deviceType}}
        </li>
        <li>
          <strong>{{ i18n.provisioner.deviceModal.name }}:</strong> {{name}}
        </li>
        <li>
          <strong>{{ i18n.provisioner.deviceModal.mac }}:</strong>
          {{macAddress}}
        </li>
        <li>
          <strong>{{ i18n.provisioner.deviceModal.user }}:</strong>
          {{ownerName}}
        </li>
        <li>
          <strong>{{ i18n.provisioner.deviceModal.enabled }}:</strong> {{#if
          enabled}}{{ i18n.provisioner.deviceModal.enabledYes }}{{else}}{{
          i18n.provisioner.deviceModal.enabledNo }}{{/if}}
        </li>
      </ul>

      <div class="config-fields" style="margin-top: 15px">
        <div class="custom-config-container" style="margin-top: 20px"></div>
        {{#each customConfig}}
        <div
          class="config-pair"
          style="
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
          "
        >
          <label>{{ i18n.provisioner.deviceModal.keyLabel }}</label>
          <input
            type="text"
            class="config-key"
            value="{{@key}}"
            style="flex: 1"
          />
          <label>{{ i18n.provisioner.deviceModal.valueLabel }}</label>
          <input
            type="text"
            class="config-value"
            value="{{this}}"
            style="flex: 1"
          />
          <button type="button" class="remove-pair">ðŸ—‘</button>
        </div>
        {{/each}}
      </div>

      <div class="config-fields dynamic" style="margin-top: 15px">
        <div class="config-pair">
          <label>{{ i18n.provisioner.deviceModal.keyLabel }}</label>
          <input
            type="text"
            class="config-key"
            placeholder="{{ i18n.provisioner.deviceModal.keyPlaceholder }}"
            style="flex: 1"
          />
          <label>{{ i18n.provisioner.deviceModal.valueLabel }}</label>
          <input
            type="text"
            class="config-value"
            placeholder="{{ i18n.provisioner.deviceModal.valuePlaceholder }}"
            style="flex: 1"
          />
          <button id="add-config-pair">
            {{ i18n.provisioner.deviceModal.addButton }}
          </button>
        </div>
      </div>

      <button id="submit-custom-config" class="btn btn-primary">
        {{ i18n.provisioner.deviceModal.setButton }}
      </button>
      <button id="delete-custom-config" class="btn btn-danger">
        {{ i18n.provisioner.deviceModal.deleteButton }}
      </button>

      <h3>{{ i18n.provisioner.deviceModal.passwordTitle }}</h3>
      <div class="device-password-section" style="margin-top: 10px">
        {{#if password}}
        <div
          id="devicepassword"
          class="devicepassword-entry"
          style="margin-bottom: 10px"
        >
          <strong>{{ i18n.provisioner.deviceModal.currentPassword }}</strong>
          {{password}}
          <i
            class="fa fa-remove devicepassword-delete"
            style="cursor: pointer; margin-left: 10px"
            title="{{ i18n.provisioner.deviceModal.deletePasswordTooltip }}"
          ></i>
        </div>
        {{else}}
        <div><em>{{ i18n.provisioner.deviceModal.noPassword }}</em></div>
        {{/if}}

        <div style="margin-top: 10px">
          <input
            id="devicepassword-set-input"
            type="text"
            placeholder="{{ i18n.provisioner.deviceModal.passwordPlaceholder }}"
            class="form-control"
          />
          <button
            id="macdevicepassword-set-button"
            class="btn btn-primary"
            style="margin-top: 5px"
          >
            {{ i18n.provisioner.deviceModal.passwordSetButton }}
          </button>
        </div>
      </div>

      <h3>{{ i18n.provisioner.deviceModal.dialplanTitle }}</h3>
      <div class="device-dialplan-section">
        {{#if dialplan.digit_map}}
        <p>
          <strong>{{ i18n.provisioner.deviceModal.currentDigitMap }}</strong>
          {{dialplan.digit_map}}
        </p>
        {{/if}} {{#if dialplan.dial_delay}}
        <p>
          <strong>{{ i18n.provisioner.deviceModal.currentDialDelay }}</strong>
          {{dialplan.dial_delay}}
        </p>
        {{/if}}

        <div class="form-row">
          <label>{{ i18n.provisioner.deviceModal.digitMapLabel }}</label>
          <input
            id="dialplan-digitmap"
            type="text"
            class="form-control"
            value="{{dialplan.digit_map}}"
          />
        </div>
        <div class="form-row">
          <label>{{ i18n.provisioner.deviceModal.dialDelayLabel }}</label>
          <input
            id="dialplan-delay"
            type="number"
            class="form-control"
            value="{{dialplan.dial_delay}}"
          />
        </div>
        <div style="margin-top: 10px">
          <button id="set-device-dialplan" class="btn btn-primary">
            {{ i18n.provisioner.deviceModal.setButton }}
          </button>
          <button id="delete-device-dialplan" class="btn btn-danger">
            {{ i18n.provisioner.deviceModal.deleteButton }}
          </button>
        </div>
      </div>

      <h3>{{ i18n.provisioner.deviceModal.groupTitle }}</h3>
      <div class="device-group-section" style="margin-top: 10px">
        <div
          id="device-group-status"
          style="margin-top: 10px; font-weight: bold"
        ></div>

        <div class="form-row">
          <label>{{ i18n.provisioner.deviceModal.groupLabel }}</label>
          <input
            type="text"
            id="device-group"
            class="form-control"
            placeholder="{{ i18n.provisioner.deviceModal.groupPlaceholder }}"
          />
        </div>
        <div class="form-row">
          <label>{{ i18n.provisioner.deviceModal.subgroupLabel }}</label>
          <input
            type="text"
            id="device-subgroup"
            class="form-control"
            placeholder="{{ i18n.provisioner.deviceModal.subgroupPlaceholder }}"
          />
        </div>

        <div style="margin-top: 10px">
          <button id="set-device-group" class="btn btn-primary">
            {{ i18n.provisioner.deviceModal.setButton }}
          </button>
          <button id="delete-device-group" class="btn btn-danger">
            {{ i18n.provisioner.deviceModal.deleteButton }}
          </button>
        </div>
      </div>

      <div class="modal-actions" style="text-align: right">
        <button id="close-modal" class="btn">
          {{ i18n.provisioner.deviceModal.close }}
        </button>
      </div>
    </div>
  </div>
</div>
